{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst TIMER_STEP = 1000;\n\nlet userSelectedDate;\nlet timerId;\n\nconst datePicker = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('[data-start]');\nconst daysSpan = document.querySelector('[data-days]');\nconst hoursSpan = document.querySelector('[data-hours]');\nconst minutesSpan = document.querySelector('[data-minutes]');\nconst secondsSpan = document.querySelector('[data-seconds]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose,\n};\n\nconst iziToastOptions = {\n  title: '',\n  message: 'Please choose a date in the future',\n  color: 'red',\n  position: 'topCenter',\n};\nflatpickr('#datetime-picker', options);\n\nsetButtonState({ isDisabled: true });\n\nfunction onClose(selectedDates) {\n  const selectedTime = selectedDates[0].getTime();\n  const currentTime = Date.now();\n\n  if (currentTime >= selectedTime) {\n    iziToast.show(iziToastOptions);\n  }\n  userSelectedDate = selectedTime - currentTime;\n  setButtonState({ isDisabled: false });\n}\n\nfunction runTimer() {\n  clearInterval(timerId);\n  datePicker.setAttribute('disabled', 'disabled');\n  timerId = setInterval(() => {\n    userSelectedDate = userSelectedDate - TIMER_STEP;\n\n    if (userSelectedDate < TIMER_STEP) {\n      clearInterval(timerId);\n      datePicker.removeAttribute('disabled');\n    }\n\n    renderTime(userSelectedDate);\n  }, TIMER_STEP);\n}\n\nfunction addLeadingZero(number) {\n  const strNumber = number.toString();\n  if (strNumber.length === 1) {\n    return number.toString().padStart(2, 0);\n  }\n  return strNumber;\n}\n\nfunction renderTime(ms) {\n  const res = convertMs(ms);\n  daysSpan.innerHTML = addLeadingZero(res.days);\n  hoursSpan.innerHTML = addLeadingZero(res.hours);\n  minutesSpan.innerHTML = addLeadingZero(res.minutes);\n  secondsSpan.innerHTML = addLeadingZero(res.seconds);\n}\n\nfunction setButtonState({ isDisabled }) {\n  if (isDisabled) {\n    startButton.setAttribute('disabled', 'disabled');\n  } else {\n    startButton.removeAttribute('disabled');\n  }\n}\n\nstartButton.addEventListener('click', () => {\n  renderTime(userSelectedDate);\n  setButtonState({ isDisabled: true });\n  runTimer();\n});\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["TIMER_STEP","userSelectedDate","timerId","datePicker","startButton","daysSpan","hoursSpan","minutesSpan","secondsSpan","options","onClose","iziToastOptions","flatpickr","setButtonState","selectedDates","selectedTime","currentTime","iziToast","runTimer","renderTime","addLeadingZero","number","strNumber","ms","res","convertMs","isDisabled","days","hours","minutes","seconds"],"mappings":"2GAKA,MAAMA,EAAa,IAEnB,IAAIC,EACAC,EAEJ,MAAMC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAAC,CACF,EAEMC,EAAkB,CACtB,MAAO,GACP,QAAS,qCACT,MAAO,MACP,SAAU,WACZ,EACAC,EAAU,mBAAoBH,CAAO,EAErCI,EAAe,CAAE,WAAY,EAAI,CAAE,EAEnC,SAASH,EAAQI,EAAe,CAC9B,MAAMC,EAAeD,EAAc,CAAC,EAAE,QAAO,EACvCE,EAAc,KAAK,MAErBA,GAAeD,GACjBE,EAAS,KAAKN,CAAe,EAE/BV,EAAmBc,EAAeC,EAClCH,EAAe,CAAE,WAAY,EAAK,CAAE,CACtC,CAEA,SAASK,GAAW,CAClB,cAAchB,CAAO,EACrBC,EAAW,aAAa,WAAY,UAAU,EAC9CD,EAAU,YAAY,IAAM,CAC1BD,EAAmBA,EAAmBD,EAElCC,EAAmBD,IACrB,cAAcE,CAAO,EACrBC,EAAW,gBAAgB,UAAU,GAGvCgB,EAAWlB,CAAgB,CAC5B,EAAED,CAAU,CACf,CAEA,SAASoB,EAAeC,EAAQ,CAC9B,MAAMC,EAAYD,EAAO,WACzB,OAAIC,EAAU,SAAW,EAChBD,EAAO,SAAU,EAAC,SAAS,EAAG,CAAC,EAEjCC,CACT,CAEA,SAASH,EAAWI,EAAI,CACtB,MAAMC,EAAMC,EAAUF,CAAE,EACxBlB,EAAS,UAAYe,EAAeI,EAAI,IAAI,EAC5ClB,EAAU,UAAYc,EAAeI,EAAI,KAAK,EAC9CjB,EAAY,UAAYa,EAAeI,EAAI,OAAO,EAClDhB,EAAY,UAAYY,EAAeI,EAAI,OAAO,CACpD,CAEA,SAASX,EAAe,CAAE,WAAAa,GAAc,CAClCA,EACFtB,EAAY,aAAa,WAAY,UAAU,EAE/CA,EAAY,gBAAgB,UAAU,CAE1C,CAEAA,EAAY,iBAAiB,QAAS,IAAM,CAC1Ce,EAAWlB,CAAgB,EAC3BY,EAAe,CAAE,WAAY,EAAI,CAAE,EACnCK,GACF,CAAC,EAED,SAASO,EAAUF,EAAI,CAQrB,MAAMI,EAAO,KAAK,MAAMJ,EAAK,KAAG,EAE1BK,EAAQ,KAAK,MAAOL,EAAK,MAAO,IAAI,EAEpCM,EAAU,KAAK,MAAQN,EAAK,MAAO,KAAQ,GAAM,EAEjDO,EAAU,KAAK,MAASP,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}